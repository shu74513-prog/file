<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Reading with Vocabulary Cards - Complete</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Georgia, serif;
            font-size: 20px;
            line-height: 2.2;
            padding: 40px 60px;
            max-width: 1000px;
            margin: 0 auto;
            color: #2c3e50;
            background: #fff;
        }
        
        p {
            margin: 30px 0;
            text-align: justify;
        }
        
        /* é‡ç‚¹è¯æ±‡æ ·å¼ - å½©è‰²å­—ä½“ + å½©è‰²é«˜äº®èƒŒæ™¯ï¼ˆæ— ä¸‹åˆ’çº¿ï¼‰ */
        .vocab {
            position: relative;
            display: inline;
            cursor: pointer;
            font-weight: 500;
            padding: 2px 6px;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        /* é¢œè‰²ä¸»é¢˜ */
        .vocab.yellow {
            color: #f57c00;
            background: #fff3cd;
        }
        .vocab.yellow:hover {
            background: #ffe69c;
            color: #e65100;
        }
        
        .vocab.purple {
            color: #6a1b9a;
            background: #f3e5f5;
        }
        .vocab.purple:hover {
            background: #e1bee7;
            color: #4a148c;
        }
        
        .vocab.cyan {
            color: #0097a7;
            background: #e0f7fa;
        }
        .vocab.cyan:hover {
            background: #b2ebf2;
            color: #006064;
        }
        
        .vocab.green {
            color: #2e7d32;
            background: #e8f5e9;
        }
        .vocab.green:hover {
            background: #c8e6c9;
            color: #1b5e20;
        }
        
        .vocab.blue {
            color: #1565c0;
            background: #e3f2fd;
        }
        .vocab.blue:hover {
            background: #bbdefb;
            color: #0d47a1;
        }
        
        .vocab.pink {
            color: #ad1457;
            background: #fce4ec;
        }
        .vocab.pink:hover {
            background: #f8bbd0;
            color: #880e4f;
        }
        
        .vocab.orange {
            color: #d84315;
            background: #fbe9e7;
        }
        .vocab.orange:hover {
            background: #ffccbc;
            color: #bf360c;
        }
        
        .vocab.red {
            color: #c62828;
            background: #ffebee;
        }
        .vocab.red:hover {
            background: #ffcdd2;
            color: #b71c1c;
        }
        
        .vocab.gray {
            color: #424242;
            background: #f5f5f5;
        }
        .vocab.gray:hover {
            background: #e0e0e0;
            color: #212121;
        }
        
        /* è¯æ±‡å¡ç‰‡ - è·Ÿéšå•è¯å¼¹å‡º */
        .vocab-card {
            display: none;
            position: absolute;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideDown 0.3s ease;
        }
        
        .vocab-card.show {
            display: block;
        }
        
        .vocab-card.position-top {
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ===== ä»¥ä¸‹æ˜¯å®Œæ•´çš„ vocab-card-v5-enhanced.html æ ·å¼ ===== */
        
        /* ä¸­æ–‡å­—ä½“ */
        .chinese {
            font-family: "PingFang SC", -apple-system, BlinkMacSystemFont, "Microsoft YaHei", sans-serif;
        }
        
        /* è‹±æ–‡å­—ä½“ */
        .english {
            font-family: Georgia, serif;
        }
        
        /* å¡ç‰‡å†…å®¹å®¹å™¨ */
        .card-content {
            padding: 40px 50px;
        }
        
        /* æ ‡é¢˜è¡Œï¼ˆå•è¯+éŸ³æ ‡+æŒ‰é’®ï¼‰ */
        .title-row {
            display: flex;
            align-items: baseline;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        /* å•è¯æ ‡é¢˜ */
        .word-title {
            font-size: 52px;
            font-weight: normal;
            color: #6c757d;
            font-family: Georgia, serif;
        }
        
        /* éŸ³æ ‡ */
        .phonetic {
            font-size: 24px;
            color: #6c757d;
            font-family: "Lucida Sans Unicode", "DejaVu Sans", "Arial Unicode MS", sans-serif;
        }
        
        /* æŒ‰é’®å®¹å™¨ */
        .buttons {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* å›¾æ ‡æŒ‰é’® */
        .icon-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 24px;
            color: #6c757d;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
        }
        
        .icon-btn:hover {
            color: #495057;
        }
        
        .icon-btn:active {
            transform: scale(0.95);
        }
        
        .favorite-btn.active {
            color: #e74c3c;
        }
        
        /* ä¸­æ–‡é‡Šä¹‰ */
        .translation-text {
            font-size: 20px;
            line-height: 1.8;
            color: #212529;
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #e9ecef;
        }
        
        /* åˆ†ç»„ */
        .section {
            margin-bottom: 25px;
        }
        
        /* åˆ†ç»„æ ‡é¢˜ */
        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #212529;
            font-family: "PingFang SC", sans-serif;
            display: inline;
            margin-right: 10px;
        }
        
        /* å†…å®¹ */
        .section-content {
            display: inline;
            font-size: 20px;
            line-height: 1.8;
            color: #212529;
            font-family: Georgia, serif;
        }
        
        /* ä¾‹å¥åŒºåŸŸï¼ˆå¯æŠ˜å ï¼‰ */
        .example-header {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .example-cn {
            font-size: 20px;
            line-height: 1.8;
            color: #212529;
            font-family: "PingFang SC", sans-serif;
            flex: 1;
        }
        
        .expand-btn {
            font-size: 18px;
            color: #6c757d;
            transition: transform 0.3s;
        }
        
        .expand-btn.expanded {
            transform: rotate(180deg);
        }
        
        .example-content {
            display: none;
            background: #f8f9fa;
            padding: 20px 25px;
            border-radius: 8px;
            margin-top: 8px;
        }
        
        .example-content.show {
            display: block;
        }
        
        .example-en {
            font-size: 20px;
            line-height: 1.8;
            color: #495057;
            font-family: Georgia, serif;
            font-style: italic;
        }
        
        /* åŒä¹‰è¡¨è¾¾å®¹å™¨ */
        .expressions-container {
            display: inline-flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 8px;
        }
        
        .expression-tag {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            color: #495057;
            padding: 8px 18px;
            border-radius: 20px;
            font-size: 18px;
            font-family: Georgia, serif;
        }
        
        /* ç›¸å…³è¡¨è¾¾é¡¹ */
        .related-item {
            margin-top: 15px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .related-header {
            display: flex;
            align-items: baseline;
            gap: 10px;
            margin-bottom: 12px;
        }
        
        .related-phrase {
            font-size: 20px;
            font-weight: 600;
            color: #212529;
            font-family: Georgia, serif;
        }
        
        .related-translation {
            font-size: 18px;
            color: #6c757d;
            font-family: "PingFang SC", sans-serif;
        }
        
        .related-example {
            font-size: 18px;
            font-style: italic;
            color: #495057;
            font-family: Georgia, serif;
            margin-bottom: 8px;
        }
        
        .related-example-cn {
            font-size: 18px;
            color: #6c757d;
            font-family: "PingFang SC", sans-serif;
            margin-bottom: 12px;
        }
        
        .related-note {
            font-size: 17px;
            color: #6c757d;
            font-family: "PingFang SC", sans-serif;
            padding-left: 15px;
            border-left: 3px solid #dee2e6;
        }
        
        /* åŸæ–‡ä¾‹å¥éƒ¨åˆ†ï¼ˆå¯æŠ˜å +ç‹¬ç«‹æ»šåŠ¨ï¼‰ */
        .original-examples {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e9ecef;
        }
        
        .original-header-row {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            margin-bottom: 15px;
        }
        
        .original-header-row:hover .original-expand-btn {
            color: #495057;
        }
        
        .original-header-title {
            font-size: 20px;
            font-weight: 600;
            color: #212529;
            font-family: "PingFang SC", sans-serif;
        }
        
        /* ç»Ÿè®¡æ ‡ç­¾ */
        .stats-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 16px;
            background: white;
            border: 1.5px solid #dee2e6;
            border-radius: 20px;
            font-size: 16px;
            color: #6c757d;
            font-family: "PingFang SC", sans-serif;
        }
        
        .stats-divider {
            color: #dee2e6;
        }
        
        .original-expand-btn {
            font-size: 18px;
            color: #6c757d;
            transition: transform 0.3s, color 0.2s;
            margin-left: auto;
        }
        
        .original-expand-btn.expanded {
            transform: rotate(180deg);
        }
        
        /* åŸæ–‡å†…å®¹åŒºåŸŸï¼ˆç‹¬ç«‹æ»šåŠ¨ï¼‰ */
        .original-content {
            display: none;
            max-height: 500px;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 10px;
        }
        
        .original-content.show {
            display: block;
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        .original-content::-webkit-scrollbar,
        .vocab-card::-webkit-scrollbar {
            width: 8px;
        }
        
        .original-content::-webkit-scrollbar-track,
        .vocab-card::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        .original-content::-webkit-scrollbar-thumb,
        .vocab-card::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        .original-content::-webkit-scrollbar-thumb:hover,
        .vocab-card::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        .original-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        /* æœŸæ•°æ ‡ç­¾ */
        .episode-tag {
            display: inline-block;
            background: white;
            border: 1.5px solid #dee2e6;
            color: #6c757d;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .original-en {
            font-size: 19px;
            line-height: 1.8;
            color: #212529;
            font-family: Georgia, serif;
            margin-bottom: 10px;
        }
        
        .original-cn {
            font-size: 19px;
            line-height: 1.8;
            color: #6c757d;
            font-family: "PingFang SC", sans-serif;
            margin-bottom: 15px;
        }
        
        /* é«˜äº®å•è¯/çŸ­è¯­ */
        .highlight {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        /* éŸ³é¢‘æ§åˆ¶æŒ‰é’® */
        .audio-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .audio-btn {
            width: 36px;
            height: 36px;
            background: white;
            border: 1.5px solid #dee2e6;
            border-radius: 8px;
            font-size: 18px;
            color: #6c757d;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            padding: 0;
        }
        
        .audio-btn:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
            color: #495057;
        }
        
        .audio-btn.active {
            background: #e9ecef;
            border-color: #adb5bd;
        }
        
        .audio-btn:active {
            transform: scale(0.95);
        }
        
        /* é€Ÿåº¦è¾“å…¥æ¡† */
        .speed-input {
            min-width: 50px;
            padding: 6px 12px;
            border: 1.5px solid #dee2e6;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            color: #6c757d;
            background: white;
            cursor: pointer;
            text-align: center;
            font-family: -apple-system, sans-serif;
            transition: all 0.2s;
            outline: none;
        }
        
        .speed-input:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
        }
        
        .speed-input[contenteditable="true"] {
            background: #e3f2fd;
            border-color: #2196f3;
            color: #1976d2;
            cursor: text;
        }
        
        /* å“åº”å¼ */
        @media (max-width: 768px) {
            body {
                padding: 20px 25px;
                font-size: 18px;
            }
            
            .vocab-card {
                width: 95vw;
                max-height: 70vh;
            }
            
            .card-content {
                padding: 30px 25px;
            }
            
            .word-title {
                font-size: 40px;
            }
            
            .original-content {
                max-height: 400px;
            }
        }
    </style>
</head>
<body>
    <p>
        I just <span class="vocab yellow" data-word="got out of the shower">got out of the shower</span>, I <span class="vocab purple" data-word="dried my hair">dried my hair</span>. And I'm just going to <span class="vocab cyan" data-word="put on a little makeup">put on a little makeup</span> today, mostly like SPF, just because it's actually <span class="vocab green" data-word="pretty sunny out">pretty sunny out</span> which I'm happy. The sun, I feel like I've told you guys this <span class="vocab blue" data-word="a million times">a million times</span>, really affects my mood. The winters in Minnesota where I'm from are <span class="vocab gray" data-word="especially dark">especially dark</span>, just like very dark and <span class="vocab orange" data-word="dreary">dreary</span>. Then when I <span class="vocab green" data-word="moved to">moved to</span> California, I was like, this is amazing. Why is it never <span class="vocab red" data-word="dreary">dreary</span> here?
    </p>
    
    <p>
        Today is the day I go to Paris. Well, I should say tomorrow because <span class="vocab blue" data-word="the second">the second</span> I wake up tomorrow morning I'm getting on a plane. So <span class="vocab purple" data-word="over the past few months">over the past few months</span> basically me and my best friend Nia have been planning this trip.
    </p>
    
    <script>
        // è¯æ±‡æ•°æ®åº“ï¼ˆå®Œæ•´ç‰ˆï¼ŒåŒ…å«æ‰€æœ‰å­—æ®µï¼‰
        const vocabularyData = {
            "got out of the shower": {
                word: "get out of the shower",
                phonetic: "/ É¡et aÊŠt É™v Ã°É™ ËˆÊƒaÊŠÉ™r /",
                translation: "æ´—å®Œæ¾¡ï¼›ä»æ·‹æµ´é—´å‡ºæ¥",
                definition: "To finish bathing and exit the shower area.",
                example_cn: "æˆ‘åˆšæ´—å®Œæ¾¡ï¼Œæ­£åœ¨å¹å¤´å‘ã€‚",
                example_en: "I just got out of the shower and I'm drying my hair.",
                synonyms: ["finish showering", "complete bathing"],
                relatedExpressions: [
                    {
                        phrase: "take a shower",
                        translation: "æ´—æ¾¡ï¼›æ·‹æµ´",
                        example: "I take a shower every morning.",
                        exampleCn: "æˆ‘æ¯å¤©æ—©ä¸Šéƒ½æ´—æ¾¡ã€‚",
                        note: "ğŸ’¡ è¡¨ç¤ºæ´—æ¾¡çš„åŠ¨ä½œï¼Œæ˜¯æœ€å¸¸ç”¨çš„è¡¨è¾¾æ–¹å¼ã€‚"
                    }
                ],
                originalExamples: [
                    {
                        episode: "EP5",
                        en: "I just <span class='highlight'>got out of the shower</span> and I'm getting ready.",
                        cn: "æˆ‘åˆšæ´—å®Œæ¾¡ï¼Œæ­£åœ¨å‡†å¤‡ã€‚",
                        audioId: "ep5-1"
                    }
                ]
            },
            "dried my hair": {
                word: "dry one's hair",
                phonetic: "/ draÉª wÊŒnz her /",
                translation: "å¹å¹²å¤´å‘ï¼›å¼„å¹²å¤´å‘",
                definition: "To remove moisture from one's hair using a towel or hair dryer.",
                example_cn: "å¥¹æ´—å®Œæ¾¡åæ€»æ˜¯ç”¨å¹é£æœºå¹å¹²å¤´å‘ã€‚",
                example_en: "She always dries her hair with a blow dryer after showering.",
                synonyms: ["blow-dry hair", "towel-dry hair"]
            },
            "put on a little makeup": {
                word: "put on makeup",
                phonetic: "/ pÊŠt É‘n ËˆmeÉªkÊŒp /",
                translation: "åŒ–å¦†ï¼›ä¸Šå¦†",
                definition: "To apply cosmetics to one's face.",
                example_cn: "å¥¹æ¯å¤©æ—©ä¸Šéƒ½ä¼šåŒ–ä¸€ç‚¹æ·¡å¦†ã€‚",
                example_en: "She puts on a little makeup every morning.",
                synonyms: ["apply makeup", "do one's makeup", "wear makeup"]
            },
            "pretty sunny out": {
                word: "sunny out",
                phonetic: "/ ËˆsÊŒni aÊŠt /",
                translation: "å¤–é¢é˜³å…‰æ˜åªšï¼›å¤©æ°”æ™´æœ—",
                definition: "Describing weather conditions with bright sunshine outside.",
                example_cn: "ä»Šå¤©å¤–é¢é˜³å…‰æ˜åªšï¼Œéå¸¸é€‚åˆå‡ºå»èµ°èµ°ã€‚",
                example_en: "It's pretty sunny out today, perfect for a walk.",
                synonyms: ["bright outside", "sunny weather", "clear skies"]
            },
            "a million times": {
                word: "a million times",
                phonetic: "/ É™ ËˆmÉªljÉ™n taÉªmz /",
                translation: "æ— æ•°æ¬¡ï¼›å¾ˆå¤šæ¬¡",
                definition: "Used hyperbolically to mean very many times.",
                example_cn: "æˆ‘å·²ç»å‘Šè¯‰è¿‡ä½ æ— æ•°æ¬¡äº†ï¼Œè¯·ä¸è¦è¿Ÿåˆ°ã€‚",
                example_en: "I've told you a million times not to be late.",
                synonyms: ["countless times", "over and over", "repeatedly"]
            },
            "especially dark": {
                word: "especially",
                phonetic: "/ ÉªËˆspeÊƒÉ™li /",
                translation: "ç‰¹åˆ«åœ°ï¼›å°¤å…¶",
                definition: "To a great extent; very much; particularly.",
                example_cn: "è¿™ä¸ªå†¬å¤©ç‰¹åˆ«å¯’å†·ã€‚",
                example_en: "This winter is especially cold.",
                synonyms: ["particularly", "notably", "remarkably"]
            },
            "dreary": {
                word: "dreary",
                phonetic: "/ ËˆdrÉªri /",
                translation: "é˜´æ²‰çš„ï¼›æ²‰é—·çš„ï¼›ä»¤äººæ²®ä¸§çš„",
                definition: "Dull, bleak, and lifeless; depressingly dull.",
                example_cn: "é˜´æ²‰çš„å¤©æ°”è®©äººæ„Ÿåˆ°æ²®ä¸§ã€‚",
                example_en: "The dreary weather makes people feel depressed.",
                synonyms: ["gloomy", "bleak", "dismal", "dull"]
            },
            "moved to": {
                word: "move to",
                phonetic: "/ muv tu /",
                translation: "æ¬åˆ°ï¼›ç§»å±…åˆ°",
                definition: "To change one's place of residence to a different location.",
                example_cn: "æˆ‘å»å¹´æ¬åˆ°äº†åŠ å·ã€‚",
                example_en: "I moved to California last year.",
                synonyms: ["relocate to", "settle in", "transfer to"]
            },
            "the second": {
                word: "the second (that)",
                phonetic: "/ Ã°É™ ËˆsekÉ™nd /",
                translation: "ä¸€...å°±...ï¼›åˆš...å°±...",
                definition: "Immediately when; as soon as.",
                example_cn: "æˆ‘ä¸€é†’æ¥å°±å»æŸ¥çœ‹é‚®ä»¶ã€‚",
                example_en: "The second I wake up, I check my email.",
                synonyms: ["as soon as", "the moment", "immediately when"]
            },
            "over the past few months": {
                word: "over the past few months",
                phonetic: "/ ËˆoÊŠvÉ™r Ã°É™ pÃ¦st fju mÊŒnÎ¸s /",
                translation: "åœ¨è¿‡å»å‡ ä¸ªæœˆé‡Œ",
                definition: "During the recent months that have already occurred.",
                example_cn: "åœ¨è¿‡å»å‡ ä¸ªæœˆé‡Œï¼Œæˆ‘å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚",
                example_en: "Over the past few months, I've learned a lot.",
                synonyms: ["in recent months", "during the last few months"]
            }
        };
        
        // å½“å‰æ˜¾ç¤ºçš„å¡ç‰‡
        let currentCard = null;
        let currentVocab = null;
        
        // è¯æ±‡ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.vocab').forEach(vocab => {
            vocab.addEventListener('click', function(e) {
                e.stopPropagation();
                const word = this.getAttribute('data-word');
                
                // å¦‚æœç‚¹å‡»çš„æ˜¯åŒä¸€ä¸ªè¯æ±‡ï¼Œåˆ™åˆ‡æ¢æ˜¾ç¤º/éšè—
                if (currentVocab === this && currentCard && currentCard.classList.contains('show')) {
                    hideCard();
                } else {
                    showCard(this, word);
                }
            });
        });
        
        // æ˜¾ç¤ºå¡ç‰‡
        function showCard(vocabElement, word) {
            const data = vocabularyData[word];
            if (!data) {
                console.error('æœªæ‰¾åˆ°è¯æ±‡æ•°æ®:', word);
                return;
            }
            
            // éšè—ä¹‹å‰çš„å¡ç‰‡
            hideCard();
            
            // åˆ›å»ºæ–°å¡ç‰‡
            const card = document.createElement('div');
            card.className = 'vocab-card';
            card.innerHTML = generateCardHTML(data);
            
            // æ·»åŠ åˆ°body
            document.body.appendChild(card);
            
            // è®¡ç®—ä½ç½®
            positionCard(card, vocabElement);
            
            // æ˜¾ç¤ºå¡ç‰‡
            setTimeout(() => {
                card.classList.add('show');
            }, 10);
            
            currentCard = card;
            currentVocab = vocabElement;
        }
        
        // éšè—å¡ç‰‡
        function hideCard() {
            if (currentCard) {
                currentCard.remove();
                currentCard = null;
                currentVocab = null;
            }
        }
        
        // è®¡ç®—å¡ç‰‡ä½ç½®
        function positionCard(card, vocabElement) {
            const rect = vocabElement.getBoundingClientRect();
            const cardHeight = 600; // é¢„ä¼°é«˜åº¦
            const spacing = 10;
            
            // è®¡ç®—æ˜¯å¦æœ‰è¶³å¤Ÿç©ºé—´åœ¨ä¸‹æ–¹æ˜¾ç¤º
            const spaceBelow = window.innerHeight - rect.bottom;
            const spaceAbove = rect.top;
            
            if (spaceBelow >= cardHeight || spaceBelow > spaceAbove) {
                // åœ¨ä¸‹æ–¹æ˜¾ç¤º
                card.style.top = (rect.bottom + spacing + window.scrollY) + 'px';
                card.classList.remove('position-top');
            } else {
                // åœ¨ä¸Šæ–¹æ˜¾ç¤º
                card.style.bottom = (window.innerHeight - rect.top + spacing - window.scrollY) + 'px';
                card.classList.add('position-top');
            }
            
            // æ°´å¹³å±…ä¸­å¯¹é½è¯æ±‡
            const cardWidth = 700;
            let left = rect.left + (rect.width / 2) - (cardWidth / 2);
            
            // ç¡®ä¿ä¸è¶…å‡ºå±å¹•
            if (left < 10) left = 10;
            if (left + cardWidth > window.innerWidth - 10) {
                left = window.innerWidth - cardWidth - 10;
            }
            
            card.style.left = left + 'px';
        }
        
        // ç”Ÿæˆå®Œæ•´çš„å¡ç‰‡HTML
        function generateCardHTML(data) {
            let html = `
                <div class="card-content">
                    <div class="title-row">
                        <h1 class="word-title english">${data.word}</h1>
                        <span class="phonetic">${data.phonetic}</span>
                        <div class="buttons">
                            <button class="icon-btn sound-btn" onclick="playSound('${data.word}')" title="å‘éŸ³">ğŸ”Š</button>
                            <button class="icon-btn favorite-btn" onclick="event.stopPropagation(); toggleFavorite(this, '${data.word}')" title="æ”¶è—">â™¡</button>
                        </div>
                    </div>
                    
                    <p class="translation-text chinese">${data.translation}</p>
                    
                    <div class="section">
                        <h2 class="section-title chinese">è‹±è‹±é‡Šä¹‰ï¼š</h2>
                        <span class="section-content english">${data.definition}</span>
                    </div>
                    
                    <div class="section">
                        <div class="example-header" onclick="toggleExample(this)">
                            <h2 class="section-title chinese">ä¾‹å¥ï¼š</h2>
                            <span class="example-cn chinese">${data.example_cn}</span>
                            <span class="expand-btn">â–¼</span>
                        </div>
                        <div class="example-content">
                            <p class="example-en english">${data.example_en}</p>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h2 class="section-title chinese">åŒä¹‰è¡¨è¾¾ï¼š</h2>
                        <div class="expressions-container">
                            ${data.synonyms.map(syn => `<span class="expression-tag english">${syn}</span>`).join('')}
                        </div>
                    </div>
            `;
            
            // æ·»åŠ ç›¸å…³è¡¨è¾¾ï¼ˆå¦‚æœæœ‰ï¼‰
            if (data.relatedExpressions && data.relatedExpressions.length > 0) {
                html += `
                    <div class="section">
                        <h2 class="section-title chinese">ç›¸å…³è¡¨è¾¾ï¼š</h2>
                        ${data.relatedExpressions.map(expr => `
                            <div class="related-item">
                                <div class="related-header">
                                    <span class="related-phrase english">${expr.phrase}</span>
                                    <span class="related-translation chinese">${expr.translation}</span>
                                </div>
                                <div class="related-example english">${expr.example}</div>
                                <div class="related-example-cn chinese">${expr.exampleCn}</div>
                                <div class="related-note chinese">${expr.note}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // æ·»åŠ åŸæ–‡ä¾‹å¥ï¼ˆå¦‚æœæœ‰ï¼‰
            if (data.originalExamples && data.originalExamples.length > 0) {
                html += `
                    <div class="original-examples">
                        <div class="original-header-row" onclick="toggleOriginalExamples(this)">
                            <h2 class="original-header-title chinese">åŸæ–‡ä¾‹å¥ï¼š</h2>
                            <div class="stats-badge">
                                <span>${data.originalExamples.length}ä¾‹å¥</span>
                            </div>
                            <span class="original-expand-btn">â–¼</span>
                        </div>
                        
                        <div class="original-content">
                            ${data.originalExamples.map(example => `
                                <div class="original-item">
                                    <span class="episode-tag">${example.episode}</span>
                                    <div class="original-en english">${example.en}</div>
                                    <div class="original-cn chinese">${example.cn}</div>
                                    <div class="audio-controls">
                                        <button class="audio-btn" onclick="event.stopPropagation(); playOriginal('${example.audioId}')" title="æ’­æ”¾">â–·</button>
                                        <button class="audio-btn" onclick="event.stopPropagation(); toggleRepeat(this, '${example.audioId}')" title="å¾ªç¯æ’­æ”¾">âŸ²</button>
                                        <span class="speed-input" 
                                              onclick="event.stopPropagation(); enableSpeedEdit(this, '${example.audioId}')"
                                              title="ç‚¹å‡»ç¼–è¾‘é€Ÿåº¦">1x</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            html += `</div>`;
            return html;
        }
        
        // ç‚¹å‡»æ–‡æ¡£å…¶ä»–åœ°æ–¹å…³é—­å¡ç‰‡
        document.addEventListener('click', function(e) {
            if (currentCard && !currentCard.contains(e.target)) {
                hideCard();
            }
        });
        
        // æ»šåŠ¨æ—¶éšè—å¡ç‰‡
        window.addEventListener('scroll', function() {
            if (currentCard) {
                hideCard();
            }
        });
        
        // æ”¶è—åŠŸèƒ½
        function toggleFavorite(btn, word) {
            const wordData = vocabularyData[Object.keys(vocabularyData).find(k => vocabularyData[k].word === word)];
            if (!wordData) return;
            
            btn.classList.toggle('active');
            let favorites = JSON.parse(localStorage.getItem('favorites') || '{}');
            
            if (btn.classList.contains('active')) {
                btn.textContent = 'â¤';
                favorites[word] = { ...wordData, favoriteTime: new Date().toISOString() };
                localStorage.setItem('favorites', JSON.stringify(favorites));
                console.log('âœ“ å·²æ”¶è—:', word);
            } else {
                btn.textContent = 'â™¡';
                delete favorites[word];
                localStorage.setItem('favorites', JSON.stringify(favorites));
                console.log('âœ“ å–æ¶ˆæ”¶è—:', word);
            }
        }
        
        // å•è¯å‘éŸ³
        function playSound(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                utterance.rate = 0.85;
                window.speechSynthesis.speak(utterance);
            }
        }
        
        // æŠ˜å åŠŸèƒ½
        function toggleExample(header) {
            const content = header.nextElementSibling;
            const arrow = header.querySelector('.expand-btn');
            content.classList.toggle('show');
            arrow.classList.toggle('expanded');
        }
        
        function toggleOriginalExamples(header) {
            const content = header.nextElementSibling;
            const arrow = header.querySelector('.original-expand-btn');
            content.classList.toggle('show');
            arrow.classList.toggle('expanded');
        }
        
        // éŸ³é¢‘æ’­æ”¾åŠŸèƒ½ï¼ˆç®€åŒ–ç‰ˆï¼Œå®é™…éœ€è¦éŸ³é¢‘æ–‡ä»¶ï¼‰
        const audioCache = {};
        const audioStates = {};
        
        function playOriginal(id) {
            console.log('æ’­æ”¾éŸ³é¢‘:', id);
            alert('éŸ³é¢‘æ’­æ”¾åŠŸèƒ½éœ€è¦å¯¹åº”çš„MP3æ–‡ä»¶\næ–‡ä»¶è·¯å¾„: ./videos/' + id + '.mp3');
        }
        
        function toggleRepeat(btn, id) {
            if (!audioStates[id]) {
                audioStates[id] = { repeat: false, speed: 1 };
            }
            audioStates[id].repeat = !audioStates[id].repeat;
            btn.classList.toggle('active');
            console.log('å¾ªç¯æ’­æ”¾' + (audioStates[id].repeat ? 'å¼€å¯' : 'å…³é—­') + ':', id);
        }
        
        function enableSpeedEdit(element, audioId) {
            if (element.getAttribute('contenteditable') === 'true') {
                return;
            }
            
            const originalValue = element.textContent;
            element.textContent = originalValue.replace('x', '');
            element.setAttribute('contenteditable', 'true');
            element.focus();
            
            const selection = window.getSelection();
            const range = document.createRange();
            range.selectNodeContents(element);
            selection.removeAllRanges();
            selection.addRange(range);
        }
        
        console.log('ğŸ“š è‹±æ–‡é˜…è¯»è¯æ±‡å¡ç‰‡ç³»ç»Ÿ - å®Œæ•´ç‰ˆ');
        console.log('âœ“ è¯æ±‡æ€»æ•°:', Object.keys(vocabularyData).length);
        console.log('âœ“ ç‚¹å‡»å½©è‰²é«˜äº®è¯æ±‡å¼¹å‡ºå¡ç‰‡ï¼ˆä¿æŒè¯æ±‡å¯è§ï¼‰');
        console.log('âœ“ å†æ¬¡ç‚¹å‡»åŒä¸€è¯æ±‡éšè—å¡ç‰‡');
    </script>
</body>
</html>