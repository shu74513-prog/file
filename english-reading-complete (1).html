<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Reading with Vocabulary Cards - Complete</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Georgia, serif;
            font-size: 20px;
            line-height: 2.2;
            padding: 40px 60px;
            max-width: 1000px;
            margin: 0 auto;
            color: #2c3e50;
            background: #fff;
        }
        
        p {
            margin: 30px 0;
            text-align: justify;
        }
        
        /* é‡ç‚¹è¯æ±‡æ ·å¼ - å½©è‰²å­—ä½“ + å½©è‰²é«˜äº®èƒŒæ™¯ï¼ˆæ— ä¸‹åˆ’çº¿ï¼‰ */
        .vocab {
            position: relative;
            display: inline;
            cursor: pointer;
            font-weight: 500;
            padding: 2px 6px;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        /* Hoveræ—¶æ˜¾ç¤ºçš„ä¸­æ–‡ç¿»è¯‘ - åœ¨æ­£ä¸Šæ–¹ */
        .vocab::before {
            content: attr(data-translation);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-8px);
            background: #2c3e50;
            color: white;
            padding: 6px 12px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: normal;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            font-family: "PingFang SC", -apple-system, BlinkMacSystemFont, "Microsoft YaHei", sans-serif;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            z-index: 999;
            margin-bottom: 2px;
        }
        
        /* å°ä¸‰è§’ç®­å¤´ */
        .vocab::after {
            content: "";
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-2px);
            border: 5px solid transparent;
            border-top-color: #2c3e50;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 999;
        }
        
        /* Hoveræ—¶æ˜¾ç¤º */
        .vocab:hover::before,
        .vocab:hover::after {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        /* é¢œè‰²ä¸»é¢˜ */
        .vocab.yellow {
            color: #f57c00;
            background: #fff3cd;
        }
        .vocab.yellow:hover {
            background: #ffe69c;
            color: #e65100;
        }
        
        .vocab.purple {
            color: #6a1b9a;
            background: #f3e5f5;
        }
        .vocab.purple:hover {
            background: #e1bee7;
            color: #4a148c;
        }
        
        .vocab.cyan {
            color: #0097a7;
            background: #e0f7fa;
        }
        .vocab.cyan:hover {
            background: #b2ebf2;
            color: #006064;
        }
        
        .vocab.green {
            color: #2e7d32;
            background: #e8f5e9;
        }
        .vocab.green:hover {
            background: #c8e6c9;
            color: #1b5e20;
        }
        
        .vocab.blue {
            color: #1565c0;
            background: #e3f2fd;
        }
        .vocab.blue:hover {
            background: #bbdefb;
            color: #0d47a1;
        }
        
        .vocab.pink {
            color: #ad1457;
            background: #fce4ec;
        }
        .vocab.pink:hover {
            background: #f8bbd0;
            color: #880e4f;
        }
        
        .vocab.orange {
            color: #d84315;
            background: #fbe9e7;
        }
        .vocab.orange:hover {
            background: #ffccbc;
            color: #bf360c;
        }
        
        .vocab.red {
            color: #c62828;
            background: #ffebee;
        }
        .vocab.red:hover {
            background: #ffcdd2;
            color: #b71c1c;
        }
        
        .vocab.gray {
            color: #424242;
            background: #f5f5f5;
        }
        .vocab.gray:hover {
            background: #e0e0e0;
            color: #212121;
        }
        
        /* è¯æ±‡å¡ç‰‡ - è·Ÿéšå•è¯å¼¹å‡º - ç¼©å°ç‰ˆ + fixedå®šä½ */
        .vocab-card {
            display: none;
            position: fixed;          /* â† æ”¹ä¸ºfixedï¼Œå¯ä»¥è¶…å‡ºå®¹å™¨è¾¹ç•Œ */
            background: white;
            border-radius: 10px;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.18);
            z-index: 1000;
            width: 580px;
            max-height: 85vh;         /* â† å¢åŠ åˆ°85vhï¼Œæ˜¾ç¤ºæ›´å¤šå†…å®¹ */
            overflow-y: auto;
            animation: slideDown 0.3s ease;
        }
        
        .vocab-card.show {
            display: block;
        }
        
        .vocab-card.position-top {
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ===== ä»¥ä¸‹æ˜¯å®Œæ•´çš„ vocab-card-v5-enhanced.html æ ·å¼ ===== */
        
        /* ä¸­æ–‡å­—ä½“ */
        .chinese {
            font-family: "PingFang SC", -apple-system, BlinkMacSystemFont, "Microsoft YaHei", sans-serif;
        }
        
        /* è‹±æ–‡å­—ä½“ */
        .english {
            font-family: Georgia, serif;
        }
        
        /* å¡ç‰‡å†…å®¹å®¹å™¨ - ç¼©å°ç‰ˆ */
        .card-content {
            padding: 30px 35px;
        }
        
        /* æ ‡é¢˜è¡Œï¼ˆå•è¯+éŸ³æ ‡+æŒ‰é’®ï¼‰- æ”¯æŒæ¢è¡Œ */
        .title-row {
            display: flex;
            align-items: baseline;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 12px;
        }
        
        /* å•è¯æ ‡é¢˜ - ç¼©å° */
        .word-title {
            font-size: 40px;
            font-weight: normal;
            color: #6c757d;
            font-family: Georgia, serif;
        }
        
        /* éŸ³æ ‡ - ç¼©å° */
        .phonetic {
            font-size: 18px;
            color: #6c757d;
            font-family: "Lucida Sans Unicode", "DejaVu Sans", "Arial Unicode MS", sans-serif;
        }
        
        /* æŒ‰é’®å®¹å™¨ */
        .buttons {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        /* å›¾æ ‡æŒ‰é’® - ç¼©å° */
        .icon-btn {
            width: 30px;
            height: 30px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 20px;
            color: #6c757d;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
        }
        
        .icon-btn:hover {
            color: #495057;
        }
        
        .icon-btn:active {
            transform: scale(0.95);
        }
        
        .favorite-btn.active {
            color: #e74c3c;
        }
        
        /* ä¸­æ–‡é‡Šä¹‰ - ç¼©å° */
        .translation-text {
            font-size: 17px;
            line-height: 1.7;
            color: #212529;
            margin-bottom: 22px;
            padding-bottom: 22px;
            border-bottom: 1px solid #e9ecef;
        }
        
        /* åˆ†ç»„ */
        .section {
            margin-bottom: 20px;
        }
        
        /* åˆ†ç»„æ ‡é¢˜ - ç¼©å° */
        .section-title {
            font-size: 17px;
            font-weight: 600;
            color: #212529;
            font-family: "PingFang SC", sans-serif;
            display: inline;
            margin-right: 8px;
        }
        
        /* å†…å®¹ - ç¼©å° */
        .section-content {
            display: inline;
            font-size: 17px;
            line-height: 1.7;
            color: #212529;
            font-family: Georgia, serif;
        }
        
        /* ä¾‹å¥åŒºåŸŸï¼ˆå¯æŠ˜å ï¼‰- ç¼©å° */
        .example-header {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            margin-top: 6px;
        }
        
        .example-cn {
            font-size: 17px;
            line-height: 1.7;
            color: #212529;
            font-family: "PingFang SC", sans-serif;
            flex: 1;
        }
        
        .expand-btn {
            font-size: 15px;
            color: #6c757d;
            transition: transform 0.3s;
        }
        
        .expand-btn.expanded {
            transform: rotate(180deg);
        }
        
        .example-content {
            display: none;
            background: #f8f9fa;
            padding: 16px 20px;
            border-radius: 6px;
            margin-top: 6px;
        }
        
        .example-content.show {
            display: block;
        }
        
        .example-en {
            font-size: 17px;
            line-height: 1.7;
            color: #495057;
            font-family: Georgia, serif;
            font-style: italic;
        }
        
        /* åŒä¹‰è¡¨è¾¾å®¹å™¨ - ç¼©å° */
        .expressions-container {
            display: inline-flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 6px;
        }
        
        .expression-tag {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            color: #495057;
            padding: 6px 14px;
            border-radius: 16px;
            font-size: 15px;
            font-family: Georgia, serif;
        }
        
        /* ç›¸å…³è¡¨è¾¾é¡¹ - ç¼©å° */
        .related-item {
            margin-top: 12px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        
        .related-header {
            display: flex;
            align-items: baseline;
            gap: 8px;
            margin-bottom: 10px;
        }
        
        .related-phrase {
            font-size: 17px;
            font-weight: 600;
            color: #212529;
            font-family: Georgia, serif;
        }
        
        .related-translation {
            font-size: 15px;
            color: #6c757d;
            font-family: "PingFang SC", sans-serif;
        }
        
        .related-example {
            font-size: 15px;
            font-style: italic;
            color: #495057;
            font-family: Georgia, serif;
            margin-bottom: 6px;
        }
        
        .related-example-cn {
            font-size: 15px;
            color: #6c757d;
            font-family: "PingFang SC", sans-serif;
            margin-bottom: 10px;
        }
        
        .related-note {
            font-size: 14px;
            color: #6c757d;
            font-family: "PingFang SC", sans-serif;
            padding-left: 12px;
            border-left: 3px solid #dee2e6;
        }
        
        /* åŸæ–‡ä¾‹å¥éƒ¨åˆ†ï¼ˆå¯æŠ˜å +ç‹¬ç«‹æ»šåŠ¨ï¼‰- ç¼©å° */
        .original-examples {
            margin-top: 22px;
            padding-top: 22px;
            border-top: 2px solid #e9ecef;
        }
        
        .original-header-row {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            margin-bottom: 12px;
        }
        
        .original-header-row:hover .original-expand-btn {
            color: #495057;
        }
        
        .original-header-title {
            font-size: 17px;
            font-weight: 600;
            color: #212529;
            font-family: "PingFang SC", sans-serif;
        }
        
        /* ç»Ÿè®¡æ ‡ç­¾ - ç¼©å° */
        .stats-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            background: white;
            border: 1.5px solid #dee2e6;
            border-radius: 16px;
            font-size: 13px;
            color: #6c757d;
            font-family: "PingFang SC", sans-serif;
        }
        
        .stats-divider {
            color: #dee2e6;
        }
        
        .original-expand-btn {
            font-size: 15px;
            color: #6c757d;
            transition: transform 0.3s, color 0.2s;
            margin-left: auto;
        }
        
        .original-expand-btn.expanded {
            transform: rotate(180deg);
        }
        
        /* åŸæ–‡å†…å®¹åŒºåŸŸï¼ˆç‹¬ç«‹æ»šåŠ¨ï¼‰- ç¼©å° */
        .original-content {
            display: none;
            max-height: 400px;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 8px;
        }
        
        .original-content.show {
            display: block;
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ - ä¼˜åŒ–ç‰ˆ */
        .original-content::-webkit-scrollbar,
        .vocab-card::-webkit-scrollbar {
            width: 10px;              /* â† 8px â†’ 10pxï¼Œæ›´æ˜æ˜¾ */
        }
        
        .original-content::-webkit-scrollbar-track,
        .vocab-card::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 5px;
        }
        
        .original-content::-webkit-scrollbar-thumb,
        .vocab-card::-webkit-scrollbar-thumb {
            background: #999;         /* â† æ›´æ·±çš„é¢œè‰² */
            border-radius: 5px;
        }
        
        .original-content::-webkit-scrollbar-thumb:hover,
        .vocab-card::-webkit-scrollbar-thumb:hover {
            background: #666;         /* â† æ‚¬åœæ—¶æ›´æ·± */
        }
        
        .original-item {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 6px;
            margin-bottom: 12px;
        }
        
        /* æœŸæ•°æ ‡ç­¾ - ç¼©å° */
        .episode-tag {
            display: inline-block;
            background: white;
            border: 1.5px solid #dee2e6;
            color: #6c757d;
            padding: 3px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .original-en {
            font-size: 16px;
            line-height: 1.7;
            color: #212529;
            font-family: Georgia, serif;
            margin-bottom: 8px;
        }
        
        .original-cn {
            font-size: 16px;
            line-height: 1.7;
            color: #6c757d;
            font-family: "PingFang SC", sans-serif;
            margin-bottom: 12px;
        }
        
        /* é«˜äº®å•è¯/çŸ­è¯­ */
        .highlight {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        /* éŸ³é¢‘æ§åˆ¶æŒ‰é’® - ç¼©å° */
        .audio-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .audio-btn {
            width: 30px;
            height: 30px;
            background: white;
            border: 1.5px solid #dee2e6;
            border-radius: 6px;
            font-size: 15px;
            color: #6c757d;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            padding: 0;
        }
        
        .audio-btn:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
            color: #495057;
        }
        
        .audio-btn.active {
            background: #e9ecef;
            border-color: #adb5bd;
        }
        
        .audio-btn:active {
            transform: scale(0.95);
        }
        
        /* é€Ÿåº¦è¾“å…¥æ¡† - ç¼©å° */
        .speed-input {
            min-width: 42px;
            padding: 4px 10px;
            border: 1.5px solid #dee2e6;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            color: #6c757d;
            background: white;
            cursor: pointer;
            text-align: center;
            font-family: -apple-system, sans-serif;
            transition: all 0.2s;
            outline: none;
        }
        
        .speed-input:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
        }
        
        .speed-input[contenteditable="true"] {
            background: #e3f2fd;
            border-color: #2196f3;
            color: #1976d2;
            cursor: text;
        }
        
        /* å“åº”å¼ */
        @media (max-width: 768px) {
            body {
                padding: 20px 25px;
                font-size: 18px;
            }
            
            .vocab-card {
                width: 95vw;
                max-height: 70vh;
            }
            
            .card-content {
                padding: 25px 20px;
            }
            
            .word-title {
                font-size: 32px;
            }
            
            .phonetic {
                font-size: 16px;
            }
            
            .original-content {
                max-height: 300px;
            }
        }
    </style>
</head>
<body>
    <p>
        I just <span class="vocab yellow" data-word="got out of the shower" data-translation="æ´—å®Œæ¾¡">got out of the shower</span>, I <span class="vocab purple" data-word="dried my hair" data-translation="å¹å¹²å¤´å‘">dried my hair</span>. And I'm just going to <span class="vocab cyan" data-word="put on a little makeup" data-translation="åŒ–å¦†">put on a little makeup</span> today, mostly like SPF, just because it's actually <span class="vocab green" data-word="pretty sunny out" data-translation="é˜³å…‰æ˜åªš">pretty sunny out</span> which I'm happy. The sun, I feel like I've told you guys this <span class="vocab blue" data-word="a million times" data-translation="æ— æ•°æ¬¡">a million times</span>, really affects my mood. The winters in Minnesota where I'm from are <span class="vocab gray" data-word="especially dark" data-translation="ç‰¹åˆ«é˜´æš—">especially dark</span>, just like very dark and <span class="vocab orange" data-word="dreary" data-translation="é˜´æ²‰çš„">dreary</span>. Then when I <span class="vocab green" data-word="moved to" data-translation="æ¬åˆ°">moved to</span> California, I was like, this is amazing. Why is it never <span class="vocab red" data-word="dreary" data-translation="é˜´æ²‰çš„">dreary</span> here?
    </p>
    
    <p>
        Today is the day I go to Paris. Well, I should say tomorrow because <span class="vocab blue" data-word="the second" data-translation="ä¸€...å°±...">the second</span> I wake up tomorrow morning I'm getting on a plane. So <span class="vocab purple" data-word="over the past few months" data-translation="è¿‡å»å‡ ä¸ªæœˆé‡Œ">over the past few months</span> basically me and my best friend Nia have been planning this trip.
    </p>
    
    <script>
        // è¯æ±‡æ•°æ®åº“ï¼ˆå®Œæ•´ç‰ˆï¼Œæ¯ä¸ªè¯æ±‡éƒ½æŒ‰ç…§get out of the showerçš„æ ¼å¼ï¼‰
        const vocabularyData = {
            "got out of the shower": {
                word: "get out of the shower",
                phonetic: "/ É¡et aÊŠt É™v Ã°É™ ËˆÊƒaÊŠÉ™r /",
                translation: "æ´—å®Œæ¾¡ï¼›ä»æ·‹æµ´é—´å‡ºæ¥",
                definition: "To finish bathing and exit the shower area.",
                example_cn: "æˆ‘åˆšæ´—å®Œæ¾¡ï¼Œæ­£åœ¨å¹å¤´å‘ã€‚",
                example_en: "I just got out of the shower and I'm drying my hair.",
                synonyms: ["finish showering", "complete bathing", "exit the shower"],
                relatedExpressions: [
                    {
                        phrase: "take a shower",
                        translation: "æ´—æ¾¡ï¼›æ·‹æµ´",
                        example: "I take a shower every morning before work.",
                        exampleCn: "æˆ‘æ¯å¤©æ—©ä¸Šä¸Šç­å‰éƒ½æ´—æ¾¡ã€‚",
                        note: "ğŸ’¡ è¡¨ç¤ºæ´—æ¾¡çš„åŠ¨ä½œï¼Œæ˜¯æœ€å¸¸ç”¨çš„è¡¨è¾¾æ–¹å¼ã€‚"
                    },
                    {
                        phrase: "hop in the shower",
                        translation: "å¿«é€Ÿæ´—ä¸ªæ¾¡",
                        example: "Let me hop in the shower real quick.",
                        exampleCn: "è®©æˆ‘å¿«é€Ÿæ´—ä¸ªæ¾¡ã€‚",
                        note: "ğŸ’¡ éæ­£å¼è¡¨è¾¾ï¼Œæš—ç¤ºå¿«é€Ÿã€éšæ„çš„æ´—æ¾¡ã€‚"
                    }
                ],
                originalExamples: [
                    {
                        episode: "EP5",
                        en: "I just <span class='highlight'>got out of the shower</span> and I'm getting ready.",
                        cn: "æˆ‘åˆšæ´—å®Œæ¾¡ï¼Œæ­£åœ¨å‡†å¤‡ã€‚",
                        audioId: "ep5-1"
                    }
                ]
            },
            "dried my hair": {
                word: "dry one's hair",
                phonetic: "/ draÉª wÊŒnz her /",
                translation: "å¹å¹²å¤´å‘ï¼›å¼„å¹²å¤´å‘",
                definition: "To remove moisture from one's hair using a towel or hair dryer.",
                example_cn: "å¥¹æ´—å®Œæ¾¡åæ€»æ˜¯ç”¨å¹é£æœºå¹å¹²å¤´å‘ã€‚",
                example_en: "She always dries her hair with a blow dryer after showering.",
                synonyms: ["blow-dry hair", "towel-dry hair"],
                relatedExpressions: [
                    {
                        phrase: "air-dry one's hair",
                        translation: "è‡ªç„¶é£å¹²å¤´å‘",
                        example: "I prefer to air-dry my hair instead of using heat.",
                        exampleCn: "æˆ‘æ›´å–œæ¬¢è®©å¤´å‘è‡ªç„¶é£å¹²è€Œä¸æ˜¯ç”¨çƒ­é£ã€‚",
                        note: "ğŸ’¡ ä¸ä½¿ç”¨å¹é£æœºï¼Œè®©å¤´å‘è‡ªç„¶å¹²ç‡¥ã€‚"
                    }
                ],
                originalExamples: [
                    {
                        episode: "EP5",
                        en: "I <span class='highlight'>dried my hair</span> and now I'm doing my makeup.",
                        cn: "æˆ‘å¹å¹²äº†å¤´å‘ï¼Œç°åœ¨åœ¨åŒ–å¦†ã€‚",
                        audioId: "ep5-2"
                    }
                ]
            },
            "put on a little makeup": {
                word: "put on makeup",
                phonetic: "/ pÊŠt É‘n ËˆmeÉªkÊŒp /",
                translation: "åŒ–å¦†ï¼›ä¸Šå¦†",
                definition: "To apply cosmetics to one's face.",
                example_cn: "å¥¹æ¯å¤©æ—©ä¸Šéƒ½ä¼šåŒ–ä¸€ç‚¹æ·¡å¦†ã€‚",
                example_en: "She puts on a little makeup every morning.",
                synonyms: ["apply makeup", "do one's makeup", "wear makeup"],
                relatedExpressions: [
                    {
                        phrase: "touch up one's makeup",
                        translation: "è¡¥å¦†",
                        example: "I need to touch up my makeup before the meeting.",
                        exampleCn: "å¼€ä¼šå‰æˆ‘éœ€è¦è¡¥ä¸ªå¦†ã€‚",
                        note: "ğŸ’¡ æŒ‡åœ¨å·²ç»åŒ–è¿‡å¦†çš„åŸºç¡€ä¸Šè¿›è¡Œä¿®è¡¥ã€‚"
                    }
                ],
                originalExamples: [
                    {
                        episode: "EP8",
                        en: "I'm just going to <span class='highlight'>put on a little makeup</span> today.",
                        cn: "æˆ‘ä»Šå¤©åªæ‰“ç®—åŒ–ç‚¹æ·¡å¦†ã€‚",
                        audioId: "ep8-1"
                    }
                ]
            },
            "pretty sunny out": {
                word: "sunny out",
                phonetic: "/ ËˆsÊŒni aÊŠt /",
                translation: "å¤–é¢é˜³å…‰æ˜åªšï¼›å¤©æ°”æ™´æœ—",
                definition: "Describing weather conditions with bright sunshine outside.",
                example_cn: "ä»Šå¤©å¤–é¢é˜³å…‰æ˜åªšï¼Œéå¸¸é€‚åˆå‡ºå»èµ°èµ°ã€‚",
                example_en: "It's pretty sunny out today, perfect for a walk.",
                synonyms: ["bright outside", "sunny weather", "clear skies"],
                relatedExpressions: [
                    {
                        phrase: "beautiful day out",
                        translation: "å¤–é¢å¤©æ°”å¾ˆå¥½",
                        example: "It's a beautiful day out, let's go to the park.",
                        exampleCn: "å¤–é¢å¤©æ°”å¾ˆå¥½ï¼Œæˆ‘ä»¬å»å…¬å›­å§ã€‚",
                        note: "ğŸ’¡ æ›´å¹¿æ³›çš„è¡¨è¾¾ï¼Œä¸ä»…æŒ‡æ™´å¤©ï¼Œè¿˜åŒ…æ‹¬æ¸©åº¦é€‚å®œç­‰ã€‚"
                    }
                ],
                originalExamples: [
                    {
                        episode: "EP10",
                        en: "It's actually <span class='highlight'>pretty sunny out</span> which I'm happy about.",
                        cn: "å¤–é¢å…¶å®é˜³å…‰æ˜åªšï¼Œæˆ‘å¾ˆé«˜å…´ã€‚",
                        audioId: "ep10-1"
                    }
                ]
            },
            "a million times": {
                word: "a million times",
                phonetic: "/ É™ ËˆmÉªljÉ™n taÉªmz /",
                translation: "æ— æ•°æ¬¡ï¼›å¾ˆå¤šæ¬¡",
                definition: "Used hyperbolically to mean very many times.",
                example_cn: "æˆ‘å·²ç»å‘Šè¯‰è¿‡ä½ æ— æ•°æ¬¡äº†ï¼Œè¯·ä¸è¦è¿Ÿåˆ°ã€‚",
                example_en: "I've told you a million times not to be late.",
                synonyms: ["countless times", "over and over", "repeatedly"],
                relatedExpressions: [
                    {
                        phrase: "a thousand times",
                        translation: "åƒç™¾æ¬¡",
                        example: "I've heard this song a thousand times.",
                        exampleCn: "è¿™é¦–æ­Œæˆ‘å¬è¿‡åƒç™¾æ¬¡äº†ã€‚",
                        note: "ğŸ’¡ åŒæ ·çš„å¤¸å¼ ç”¨æ³•ï¼Œè¡¨ç¤ºæ¬¡æ•°éå¸¸å¤šã€‚"
                    }
                ],
                originalExamples: [
                    {
                        episode: "EP12",
                        en: "I feel like I've told you guys this <span class='highlight'>a million times</span>.",
                        cn: "æˆ‘æ„Ÿè§‰å·²ç»å‘Šè¯‰è¿‡ä½ ä»¬æ— æ•°æ¬¡äº†ã€‚",
                        audioId: "ep12-1"
                    }
                ]
            },
            "especially dark": {
                word: "especially",
                phonetic: "/ ÉªËˆspeÊƒÉ™li /",
                translation: "ç‰¹åˆ«åœ°ï¼›å°¤å…¶",
                definition: "To a great extent; very much; particularly.",
                example_cn: "è¿™ä¸ªå†¬å¤©ç‰¹åˆ«å¯’å†·ã€‚",
                example_en: "This winter is especially cold.",
                synonyms: ["particularly", "notably", "remarkably"],
                relatedExpressions: [
                    {
                        phrase: "particularly important",
                        translation: "ç‰¹åˆ«é‡è¦",
                        example: "This point is particularly important to understand.",
                        exampleCn: "è¿™ä¸€ç‚¹ç†è§£èµ·æ¥ç‰¹åˆ«é‡è¦ã€‚",
                        note: "ğŸ’¡ particularly æ˜¯ especially çš„è¿‘ä¹‰è¯ï¼Œå¯ä»¥äº’æ¢ä½¿ç”¨ã€‚"
                    }
                ],
                originalExamples: [
                    {
                        episode: "EP15",
                        en: "The winters in Minnesota are <span class='highlight'>especially dark</span>.",
                        cn: "æ˜å°¼è‹è¾¾å·çš„å†¬å¤©ç‰¹åˆ«é˜´æš—ã€‚",
                        audioId: "ep15-1"
                    }
                ]
            },
            "dreary": {
                word: "dreary",
                phonetic: "/ ËˆdrÉªri /",
                translation: "é˜´æ²‰çš„ï¼›æ²‰é—·çš„ï¼›ä»¤äººæ²®ä¸§çš„",
                definition: "Dull, bleak, and lifeless; depressingly dull.",
                example_cn: "é˜´æ²‰çš„å¤©æ°”è®©äººæ„Ÿåˆ°æ²®ä¸§ã€‚",
                example_en: "The dreary weather makes people feel depressed.",
                synonyms: ["gloomy", "bleak", "dismal", "dull"],
                relatedExpressions: [
                    {
                        phrase: "gloomy atmosphere",
                        translation: "é˜´æ²‰çš„æ°”æ°›",
                        example: "The office has a gloomy atmosphere today.",
                        exampleCn: "ä»Šå¤©åŠå…¬å®¤æ°”æ°›å¾ˆé˜´æ²‰ã€‚",
                        note: "ğŸ’¡ gloomy å¼ºè°ƒæ˜æš—å’Œå‹æŠ‘çš„æ„Ÿè§‰ã€‚"
                    }
                ],
                originalExamples: [
                    {
                        episode: "EP16",
                        en: "It's just very dark and <span class='highlight'>dreary</span>.",
                        cn: "å¤©æ°”å°±æ˜¯éå¸¸é˜´æš—å’Œæ²‰é—·ã€‚",
                        audioId: "ep16-1"
                    }
                ]
            },
            "moved to": {
                word: "move to",
                phonetic: "/ muv tu /",
                translation: "æ¬åˆ°ï¼›ç§»å±…åˆ°",
                definition: "To change one's place of residence to a different location.",
                example_cn: "æˆ‘å»å¹´æ¬åˆ°äº†åŠ å·ã€‚",
                example_en: "I moved to California last year.",
                synonyms: ["relocate to", "settle in", "transfer to"],
                relatedExpressions: [
                    {
                        phrase: "relocate to",
                        translation: "é‡æ–°å®‰ç½®åˆ°ï¼›è¿ç§»åˆ°",
                        example: "The company relocated to a bigger office.",
                        exampleCn: "å…¬å¸æ¬åˆ°äº†æ›´å¤§çš„åŠå…¬å®¤ã€‚",
                        note: "ğŸ’¡ relocate æ›´æ­£å¼ï¼Œå¸¸ç”¨äºå…¬å¸æˆ–æœºæ„çš„æ¬è¿ã€‚"
                    }
                ],
                originalExamples: [
                    {
                        episode: "EP18",
                        en: "Then when I <span class='highlight'>moved to</span> California, I was like, this is amazing.",
                        cn: "ç„¶åå½“æˆ‘æ¬åˆ°åŠ å·æ—¶ï¼Œæˆ‘è§‰å¾—è¿™å¤ªæ£’äº†ã€‚",
                        audioId: "ep18-1"
                    }
                ]
            },
            "the second": {
                word: "the second (that)",
                phonetic: "/ Ã°É™ ËˆsekÉ™nd /",
                translation: "ä¸€...å°±...ï¼›åˆš...å°±...",
                definition: "Immediately when; as soon as.",
                example_cn: "æˆ‘ä¸€é†’æ¥å°±å»æŸ¥çœ‹é‚®ä»¶ã€‚",
                example_en: "The second I wake up, I check my email.",
                synonyms: ["as soon as", "the moment", "immediately when"],
                relatedExpressions: [
                    {
                        phrase: "the moment",
                        translation: "ä¸€...å°±...",
                        example: "The moment I saw her, I knew something was wrong.",
                        exampleCn: "æˆ‘ä¸€çœ‹åˆ°å¥¹å°±çŸ¥é“å‡ºäº‹äº†ã€‚",
                        note: "ğŸ’¡ ä¸ the second ç”¨æ³•å®Œå…¨ç›¸åŒï¼Œå¯ä»¥äº’æ¢ã€‚"
                    }
                ],
                originalExamples: [
                    {
                        episode: "EP5",
                        en: "And then <span class='highlight'>the second</span> we get on Face Time, it's like no time has passed.",
                        cn: "ç„¶åä¸€æ—¦æˆ‘ä»¬å¼€è§†é¢‘ï¼Œå°±åƒæ—¶é—´ä»æœªæµé€ã€‚",
                        audioId: "ep5-1"
                    }
                ]
            },
            "over the past few months": {
                word: "over the past few months",
                phonetic: "/ ËˆoÊŠvÉ™r Ã°É™ pÃ¦st fju mÊŒnÎ¸s /",
                translation: "åœ¨è¿‡å»å‡ ä¸ªæœˆé‡Œ",
                definition: "During the recent months that have already occurred.",
                example_cn: "åœ¨è¿‡å»å‡ ä¸ªæœˆé‡Œï¼Œæˆ‘å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚",
                example_en: "Over the past few months, I've learned a lot.",
                synonyms: ["in recent months", "during the last few months"],
                relatedExpressions: [
                    {
                        phrase: "over the past year",
                        translation: "åœ¨è¿‡å»ä¸€å¹´é‡Œ",
                        example: "Over the past year, I've grown so much.",
                        exampleCn: "åœ¨è¿‡å»ä¸€å¹´é‡Œï¼Œæˆ‘æˆé•¿äº†å¾ˆå¤šã€‚",
                        note: "ğŸ’¡ æ—¶é—´èŒƒå›´å¯ä»¥çµæ´»è°ƒæ•´ï¼špast week, past yearç­‰ã€‚"
                    }
                ],
                originalExamples: [
                    {
                        episode: "EP20",
                        en: "So <span class='highlight'>over the past few months</span> we've been planning this trip.",
                        cn: "æ‰€ä»¥åœ¨è¿‡å»å‡ ä¸ªæœˆé‡Œæˆ‘ä»¬ä¸€ç›´åœ¨è®¡åˆ’è¿™æ¬¡æ—…è¡Œã€‚",
                        audioId: "ep20-1"
                    }
                ]
            }
        };
        
        // å½“å‰æ˜¾ç¤ºçš„å¡ç‰‡
        let currentCard = null;
        let currentVocab = null;
        
        // è¯æ±‡ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.vocab').forEach(vocab => {
            vocab.addEventListener('click', function(e) {
                e.stopPropagation();
                const word = this.getAttribute('data-word');
                
                // å¦‚æœç‚¹å‡»çš„æ˜¯åŒä¸€ä¸ªè¯æ±‡ï¼Œåˆ™åˆ‡æ¢æ˜¾ç¤º/éšè—
                if (currentVocab === this && currentCard && currentCard.classList.contains('show')) {
                    hideCard();
                } else {
                    showCard(this, word);
                }
            });
        });
        
        // æ˜¾ç¤ºå¡ç‰‡
        function showCard(vocabElement, word) {
            const data = vocabularyData[word];
            if (!data) {
                console.error('æœªæ‰¾åˆ°è¯æ±‡æ•°æ®:', word);
                return;
            }
            
            // éšè—ä¹‹å‰çš„å¡ç‰‡
            hideCard();
            
            // åˆ›å»ºæ–°å¡ç‰‡
            const card = document.createElement('div');
            card.className = 'vocab-card';
            card.innerHTML = generateCardHTML(data);
            
            // æ·»åŠ åˆ°body
            document.body.appendChild(card);
            
            // è®¡ç®—ä½ç½®
            positionCard(card, vocabElement);
            
            // æ˜¾ç¤ºå¡ç‰‡
            setTimeout(() => {
                card.classList.add('show');
            }, 10);
            
            currentCard = card;
            currentVocab = vocabElement;
        }
        
        // éšè—å¡ç‰‡
        function hideCard() {
            if (currentCard) {
                currentCard.remove();
                currentCard = null;
                currentVocab = null;
            }
        }
        
        // è®¡ç®—å¡ç‰‡ä½ç½® - fixedå®šä½ç‰ˆæœ¬
        function positionCard(card, vocabElement) {
            const rect = vocabElement.getBoundingClientRect();
            const cardHeight = 500; // é¢„ä¼°é«˜åº¦ï¼ˆç¼©å°åï¼‰
            const spacing = 10;
            
            // è®¡ç®—æ˜¯å¦æœ‰è¶³å¤Ÿç©ºé—´åœ¨ä¸‹æ–¹æ˜¾ç¤º
            const spaceBelow = window.innerHeight - rect.bottom;
            const spaceAbove = rect.top;
            
            if (spaceBelow >= cardHeight || spaceBelow > spaceAbove) {
                // åœ¨ä¸‹æ–¹æ˜¾ç¤º - fixedå®šä½ä¸éœ€è¦window.scrollY
                card.style.top = (rect.bottom + spacing) + 'px';
                card.style.bottom = 'auto';
                card.classList.remove('position-top');
            } else {
                // åœ¨ä¸Šæ–¹æ˜¾ç¤º - fixedå®šä½ä¸éœ€è¦window.scrollY
                card.style.top = 'auto';
                card.style.bottom = (window.innerHeight - rect.top + spacing) + 'px';
                card.classList.add('position-top');
            }
            
            // æ°´å¹³å±…ä¸­å¯¹é½è¯æ±‡
            const cardWidth = 580; // æ›´æ–°ä¸ºæ–°çš„å¡ç‰‡å®½åº¦
            let left = rect.left + (rect.width / 2) - (cardWidth / 2);
            
            // ç¡®ä¿ä¸è¶…å‡ºå±å¹•å·¦å³è¾¹ç•Œ
            if (left < 10) left = 10;
            if (left + cardWidth > window.innerWidth - 10) {
                left = window.innerWidth - cardWidth - 10;
            }
            
            card.style.left = left + 'px';
        }
        
        // ç”Ÿæˆå®Œæ•´çš„å¡ç‰‡HTML
        function generateCardHTML(data) {
            let html = `
                <div class="card-content">
                    <div class="title-row">
                        <h1 class="word-title english">${data.word}</h1>
                        <span class="phonetic">${data.phonetic}</span>
                        <div class="buttons">
                            <button class="icon-btn sound-btn" onclick="playSound('${data.word}')">ğŸ”Š</button>
                            <button class="icon-btn favorite-btn" onclick="event.stopPropagation(); toggleFavorite(this, '${data.word}')">â™¡</button>
                        </div>
                    </div>
                    
                    <p class="translation-text chinese">${data.translation}</p>
                    
                    <div class="section">
                        <h2 class="section-title chinese">è‹±è‹±é‡Šä¹‰ï¼š</h2>
                        <span class="section-content english">${data.definition}</span>
                    </div>
                    
                    <div class="section">
                        <div class="example-header" onclick="toggleExample(this)">
                            <h2 class="section-title chinese">ä¾‹å¥ï¼š</h2>
                            <span class="example-cn chinese">${data.example_cn}</span>
                            <span class="expand-btn">â–¼</span>
                        </div>
                        <div class="example-content">
                            <p class="example-en english">${data.example_en}</p>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h2 class="section-title chinese">åŒä¹‰è¡¨è¾¾ï¼š</h2>
                        <div class="expressions-container">
                            ${data.synonyms.map(syn => `<span class="expression-tag english">${syn}</span>`).join('')}
                        </div>
                    </div>
            `;
            
            // æ·»åŠ ç›¸å…³è¡¨è¾¾ï¼ˆå¦‚æœæœ‰ï¼‰
            if (data.relatedExpressions && data.relatedExpressions.length > 0) {
                html += `
                    <div class="section">
                        <h2 class="section-title chinese">ç›¸å…³è¡¨è¾¾ï¼š</h2>
                        ${data.relatedExpressions.map(expr => `
                            <div class="related-item">
                                <div class="related-header">
                                    <span class="related-phrase english">${expr.phrase}</span>
                                    <span class="related-translation chinese">${expr.translation}</span>
                                </div>
                                <div class="related-example english">${expr.example}</div>
                                <div class="related-example-cn chinese">${expr.exampleCn}</div>
                                <div class="related-note chinese">${expr.note}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // æ·»åŠ åŸæ–‡ä¾‹å¥ï¼ˆå¦‚æœæœ‰ï¼‰
            if (data.originalExamples && data.originalExamples.length > 0) {
                html += `
                    <div class="original-examples">
                        <div class="original-header-row" onclick="toggleOriginalExamples(this)">
                            <h2 class="original-header-title chinese">åŸæ–‡ä¾‹å¥ï¼š</h2>
                            <div class="stats-badge">
                                <span>${data.originalExamples.length}ä¾‹å¥</span>
                            </div>
                            <span class="original-expand-btn">â–¼</span>
                        </div>
                        
                        <div class="original-content">
                            ${data.originalExamples.map(example => `
                                <div class="original-item">
                                    <span class="episode-tag">${example.episode}</span>
                                    <div class="original-en english">${example.en}</div>
                                    <div class="original-cn chinese">${example.cn}</div>
                                    <div class="audio-controls">
                                        <button class="audio-btn" onclick="event.stopPropagation(); playOriginal('${example.audioId}')">â–·</button>
                                        <button class="audio-btn" onclick="event.stopPropagation(); toggleRepeat(this, '${example.audioId}')">âŸ²</button>
                                        <span class="speed-input" 
                                              onclick="event.stopPropagation(); enableSpeedEdit(this, '${example.audioId}')">1x</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            html += `</div>`;
            return html;
        }
        
        // ç‚¹å‡»æ–‡æ¡£å…¶ä»–åœ°æ–¹å…³é—­å¡ç‰‡
        document.addEventListener('click', function(e) {
            if (currentCard && !currentCard.contains(e.target)) {
                hideCard();
            }
        });
        
        // æ»šåŠ¨æ—¶éšè—å¡ç‰‡
        window.addEventListener('scroll', function() {
            if (currentCard) {
                hideCard();
            }
        });
        
        // æ”¶è—åŠŸèƒ½
        function toggleFavorite(btn, word) {
            const wordData = vocabularyData[Object.keys(vocabularyData).find(k => vocabularyData[k].word === word)];
            if (!wordData) return;
            
            btn.classList.toggle('active');
            let favorites = JSON.parse(localStorage.getItem('favorites') || '{}');
            
            if (btn.classList.contains('active')) {
                btn.textContent = 'â¤';
                favorites[word] = { ...wordData, favoriteTime: new Date().toISOString() };
                localStorage.setItem('favorites', JSON.stringify(favorites));
                console.log('âœ“ å·²æ”¶è—:', word);
            } else {
                btn.textContent = 'â™¡';
                delete favorites[word];
                localStorage.setItem('favorites', JSON.stringify(favorites));
                console.log('âœ“ å–æ¶ˆæ”¶è—:', word);
            }
        }
        
        // å•è¯å‘éŸ³ - æ”¹è¿›ç‰ˆï¼ˆå¤„ç†ç‰¹æ®Šæ–‡æœ¬ï¼‰
        function playSound(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                
                // æ–‡æœ¬é¢„å¤„ç†ï¼šå¤„ç†ç‰¹æ®Šæƒ…å†µ
                let cleanText = text;
                
                // å¤„ç† one's â†’ yourï¼ˆæ›´è‡ªç„¶çš„å‘éŸ³ï¼‰
                cleanText = cleanText.replace(/one's/gi, 'your');
                // "dry one's hair" â†’ "dry your hair" âœ“
                
                // å¤„ç† someone's â†’ their
                cleanText = cleanText.replace(/someone's/gi, 'their');
                
                console.log('åŸå§‹æ–‡æœ¬:', text);
                console.log('å¤„ç†åæ–‡æœ¬:', cleanText);
                
                const utterance = new SpeechSynthesisUtterance(cleanText);
                utterance.lang = 'en-US';
                utterance.rate = 0.85;
                
                utterance.onstart = function() {
                    console.log('âœ“ å¼€å§‹å‘éŸ³:', cleanText);
                };
                
                utterance.onend = function() {
                    console.log('âœ“ å‘éŸ³å®Œæˆ');
                };
                
                utterance.onerror = function(event) {
                    console.error('âœ— å‘éŸ³é”™è¯¯:', event.error);
                };
                
                window.speechSynthesis.speak(utterance);
            }
        }
        
        // æŠ˜å åŠŸèƒ½
        function toggleExample(header) {
            const content = header.nextElementSibling;
            const arrow = header.querySelector('.expand-btn');
            content.classList.toggle('show');
            arrow.classList.toggle('expanded');
        }
        
        function toggleOriginalExamples(header) {
            const content = header.nextElementSibling;
            const arrow = header.querySelector('.original-expand-btn');
            content.classList.toggle('show');
            arrow.classList.toggle('expanded');
        }
        
        // éŸ³é¢‘æ’­æ”¾åŠŸèƒ½ï¼ˆå®Œæ•´ç‰ˆï¼Œå¤åˆ¶è‡ªvocab-card-v5-enhanced.htmlï¼‰
        const audioCache = {};
        const audioStates = {};
        
        function playOriginal(id) {
            console.log('=== éŸ³é¢‘æ’­æ”¾è§¦å‘ ===');
            console.log('éŸ³é¢‘ID:', id);
            
            // æ‰¾åˆ°å¯¹åº”çš„æ’­æ”¾æŒ‰é’®
            const buttons = document.querySelectorAll('.audio-btn');
            let playButton = null;
            
            for (let btn of buttons) {
                const onclick = btn.getAttribute('onclick');
                if (onclick && onclick.includes(`playOriginal('${id}')`)) {
                    playButton = btn;
                    break;
                }
            }
            
            if (!audioCache[id]) {
                console.log('é¦–æ¬¡åŠ è½½æ­¤éŸ³é¢‘ï¼Œåˆ›å»ºAudioå¯¹è±¡...');
                
                // ä½¿ç”¨ç›¸å¯¹è·¯å¾„åŠ è½½MP3éŸ³é¢‘
                audioCache[id] = new Audio(`./videos/${id}.mp3`);
                
                audioCache[id].addEventListener('loadstart', function() {
                    console.log('âœ“ å¼€å§‹åŠ è½½éŸ³é¢‘:', id);
                });
                
                audioCache[id].addEventListener('canplay', function() {
                    console.log('âœ“ éŸ³é¢‘å¯ä»¥æ’­æ”¾:', id);
                });
                
                audioCache[id].addEventListener('playing', function() {
                    console.log('âœ“ éŸ³é¢‘æ­£åœ¨æ’­æ”¾:', id);
                    // æ›´æ–°æŒ‰é’®çŠ¶æ€ä¸ºæ’­æ”¾ä¸­
                    if (playButton) {
                        playButton.textContent = 'â¸';
                        playButton.classList.add('active');
                    }
                });
                
                audioCache[id].addEventListener('pause', function() {
                    console.log('âœ“ éŸ³é¢‘å·²æš‚åœ:', id);
                    // æ¢å¤æŒ‰é’®ä¸ºæ’­æ”¾çŠ¶æ€
                    if (playButton) {
                        playButton.textContent = 'â–·';
                        playButton.classList.remove('active');
                    }
                });
                
                audioCache[id].addEventListener('ended', function() {
                    console.log('âœ“ éŸ³é¢‘æ’­æ”¾å®Œæˆ:', id);
                    // æ¢å¤æŒ‰é’®ä¸ºæ’­æ”¾çŠ¶æ€
                    if (playButton) {
                        playButton.textContent = 'â–·';
                        playButton.classList.remove('active');
                    }
                });
                
                audioCache[id].addEventListener('error', function(e) {
                    console.error('âœ— éŸ³é¢‘åŠ è½½å¤±è´¥:', id);
                    console.error('é”™è¯¯ç±»å‹:', e.type);
                    
                    // æ¢å¤æŒ‰é’®çŠ¶æ€
                    if (playButton) {
                        playButton.textContent = 'â–·';
                        playButton.classList.remove('active');
                    }
                    
                    const errorMsg = `éŸ³é¢‘æ–‡ä»¶åŠ è½½å¤±è´¥ï¼

éŸ³é¢‘ID: ${id}
æœŸæœ›è·¯å¾„: ./videos/${id}.mp3

å¯èƒ½çš„åŸå› ï¼š
1. âŒ videosæ–‡ä»¶å¤¹ä¸å­˜åœ¨
2. âŒ éŸ³é¢‘æ–‡ä»¶ ${id}.mp3 ä¸åœ¨videosæ–‡ä»¶å¤¹ä¸­
3. âŒ æ–‡ä»¶åæ‹¼å†™é”™è¯¯ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
4. âŒ æ–‡ä»¶æ ¼å¼ä¸æ˜¯MP3

è§£å†³æ–¹æ¡ˆï¼š
1. åœ¨HTMLæ–‡ä»¶æ‰€åœ¨ç›®å½•åˆ›å»ºvideosæ–‡ä»¶å¤¹
2. å°† ${id}.mp3 æ–‡ä»¶æ”¾å…¥videosæ–‡ä»¶å¤¹
3. ç¡®è®¤æ–‡ä»¶åå®Œå…¨åŒ¹é…ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰

å½“å‰æ–‡ä»¶å¤¹ç»“æ„åº”è¯¥æ˜¯ï¼š
HTMLæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹/
â”œâ”€â”€ english-reading-complete.html
â””â”€â”€ videos/
    â””â”€â”€ ${id}.mp3`;
                    
                    alert(errorMsg);
                });
            }
            
            const audio = audioCache[id];
            
            // æ£€æŸ¥æ˜¯å¦æ­£åœ¨æ’­æ”¾
            if (!audio.paused) {
                // å¦‚æœæ­£åœ¨æ’­æ”¾ï¼Œåˆ™æš‚åœ
                console.log('æš‚åœæ’­æ”¾');
                audio.pause();
                return;
            }
            
            // åº”ç”¨éŸ³é¢‘è®¾ç½®
            if (audioStates[id]) {
                audio.loop = audioStates[id].repeat || false;
                audio.playbackRate = audioStates[id].speed || 1;
                console.log('éŸ³é¢‘è®¾ç½® - å¾ªç¯:', audio.loop, 'é€Ÿåº¦:', audio.playbackRate);
            }
            
            // é‡ç½®æ’­æ”¾ä½ç½®
            audio.currentTime = 0;
            console.log('é‡ç½®æ’­æ”¾ä½ç½®åˆ°å¼€å§‹');
            
            // å°è¯•æ’­æ”¾
            console.log('å°è¯•æ’­æ”¾éŸ³é¢‘...');
            audio.play()
                .then(function() {
                    console.log('âœ“ éŸ³é¢‘æ’­æ”¾æˆåŠŸ:', id);
                })
                .catch(function(error) {
                    console.error('âœ— æ’­æ”¾å¤±è´¥:', error);
                    
                    // æ¢å¤æŒ‰é’®çŠ¶æ€
                    if (playButton) {
                        playButton.textContent = 'â–·';
                        playButton.classList.remove('active');
                    }
                    
                    let errorMsg = 'éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼\n\n';
                    
                    if (error.name === 'NotAllowedError') {
                        errorMsg += 'åŸå› ï¼šæµè§ˆå™¨é˜»æ­¢äº†è‡ªåŠ¨æ’­æ”¾\n\nè§£å†³æ–¹æ¡ˆï¼š\n1. éœ€è¦å…ˆç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®\n2. æˆ–è€…åœ¨æµè§ˆå™¨è®¾ç½®ä¸­å…è®¸éŸ³é¢‘è‡ªåŠ¨æ’­æ”¾';
                    } else if (error.name === 'NotSupportedError') {
                        errorMsg += 'åŸå› ï¼šéŸ³é¢‘æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ\n\nè§£å†³æ–¹æ¡ˆï¼š\n1. ç¡®è®¤æ–‡ä»¶æ˜¯MP3æ ¼å¼\n2. å°è¯•ä½¿ç”¨å…¶ä»–æµè§ˆå™¨';
                    } else {
                        errorMsg += 'é”™è¯¯ï¼š' + error.message + '\n\nè¯·æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰äº†è§£è¯¦ç»†ä¿¡æ¯';
                    }
                    
                    alert(errorMsg);
                });
            
            console.log('=== éŸ³é¢‘æ’­æ”¾ç»“æŸ ===\n');
        }
        
        function toggleRepeat(btn, id) {
            if (!audioStates[id]) {
                audioStates[id] = { repeat: false, speed: 1 };
            }
            
            audioStates[id].repeat = !audioStates[id].repeat;
            btn.classList.toggle('active');
            
            if (audioCache[id]) {
                audioCache[id].loop = audioStates[id].repeat;
            }
            
            console.log('å¾ªç¯æ’­æ”¾' + (audioStates[id].repeat ? 'å¼€å¯' : 'å…³é—­') + ':', id);
        }
        
        function enableSpeedEdit(element, audioId) {
            if (element.getAttribute('contenteditable') === 'true') {
                return;
            }
            
            const originalValue = element.textContent;
            element.textContent = originalValue.replace('x', '');
            element.setAttribute('contenteditable', 'true');
            element.focus();
            
            const selection = window.getSelection();
            const range = document.createRange();
            range.selectNodeContents(element);
            selection.removeAllRanges();
            selection.addRange(range);
            
            const handleEnter = function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    applySpeed(element, audioId);
                }
            };
            
            const handleBlur = function() {
                applySpeed(element, audioId);
            };
            
            element.addEventListener('keydown', handleEnter);
            element.addEventListener('blur', handleBlur);
            element._handleEnter = handleEnter;
            element._handleBlur = handleBlur;
        }
        
        function applySpeed(element, audioId) {
            if (element._handleEnter) {
                element.removeEventListener('keydown', element._handleEnter);
                element.removeEventListener('blur', element._handleBlur);
                delete element._handleEnter;
                delete element._handleBlur;
            }
            
            let speedText = element.textContent.trim().replace('x', '');
            let speed = parseFloat(speedText);
            
            if (isNaN(speed) || speed < 0.5 || speed > 2) {
                speed = Math.max(0.5, Math.min(2, speed || 1));
            }
            
            speed = Math.round(speed * 10) / 10;
            element.textContent = speed + 'x';
            
            if (!audioStates[audioId]) {
                audioStates[audioId] = { repeat: false, speed: 1 };
            }
            audioStates[audioId].speed = speed;
            
            if (audioCache[audioId]) {
                audioCache[audioId].playbackRate = speed;
            }
            
            element.setAttribute('contenteditable', 'false');
            element.blur();
            console.log('æ’­æ”¾é€Ÿåº¦è®¾ç½®ä¸º:', speed, 'for', audioId);
        }
        
        console.log('ğŸ“š è‹±æ–‡é˜…è¯»è¯æ±‡å¡ç‰‡ç³»ç»Ÿ - å®Œæ•´ç‰ˆ');
        console.log('âœ“ è¯æ±‡æ€»æ•°:', Object.keys(vocabularyData).length);
        console.log('âœ“ ç‚¹å‡»å½©è‰²é«˜äº®è¯æ±‡å¼¹å‡ºå¡ç‰‡ï¼ˆä¿æŒè¯æ±‡å¯è§ï¼‰');
        console.log('âœ“ å†æ¬¡ç‚¹å‡»åŒä¸€è¯æ±‡éšè—å¡ç‰‡');
    </script>
</body>
</html>