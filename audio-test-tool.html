<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³é¢‘æ’­æ”¾æµ‹è¯•å·¥å…·</title>
    <style>
        body {
            font-family: Arial, "Microsoft YaHei", sans-serif;
            padding: 40px;
            background: #f5f5f5;
        }
        .test-box {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        h2 {
            color: #666;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .info {
            background: #e7f3ff;
            padding: 15px;
            border-left: 4px solid #2196f3;
            margin: 15px 0;
        }
        .result {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .file-check {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="test-box">
        <h1>ğŸ”§ éŸ³é¢‘æ’­æ”¾åŠŸèƒ½æµ‹è¯•å·¥å…·</h1>
        <p>è¿™ä¸ªé¡µé¢å¸®åŠ©æ‚¨è¯Šæ–­å•è¯å¡ç‰‡çš„éŸ³é¢‘æ’­æ”¾é—®é¢˜</p>
    </div>

    <div class="test-box">
        <h2>1ï¸âƒ£ æµè§ˆå™¨æ”¯æŒæ£€æµ‹</h2>
        <div id="browserCheck" class="result">æ£€æµ‹ä¸­...</div>
    </div>

    <div class="test-box">
        <h2>2ï¸âƒ£ æµ‹è¯•Web Speech APIï¼ˆå•è¯å‘éŸ³ğŸ”Šï¼‰</h2>
        <button onclick="testSpeech()">ğŸ”Š æµ‹è¯•å•è¯å‘éŸ³</button>
        <div id="speechResult" class="result"></div>
    </div>

    <div class="test-box">
        <h2>3ï¸âƒ£ æµ‹è¯•MP3éŸ³é¢‘æ’­æ”¾ï¼ˆåŸæ–‡ä¾‹å¥â–·ï¼‰</h2>
        <div class="info">
            <strong>âš ï¸ é‡è¦ï¼š</strong> æ­¤æµ‹è¯•éœ€è¦ä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š<br>
            HTMLæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹/<br>
            â”œâ”€â”€ æ­¤æµ‹è¯•é¡µé¢.html<br>
            â””â”€â”€ videos/<br>
            &nbsp;&nbsp;&nbsp;&nbsp;â””â”€â”€ ep5-1.mp3
        </div>
        <button onclick="testAudio()">â–· æµ‹è¯•MP3æ’­æ”¾</button>
        <div id="audioResult" class="result"></div>
    </div>

    <div class="test-box">
        <h2>4ï¸âƒ£ æ–‡ä»¶ç»“æ„æ£€æŸ¥</h2>
        <div class="file-check">
            <strong>è¯·ç¡®è®¤ï¼š</strong><br>
            â–¡ HTMLæ–‡ä»¶å’Œvideosæ–‡ä»¶å¤¹åœ¨åŒä¸€ç›®å½•<br>
            â–¡ videosæ–‡ä»¶å¤¹ä¸­æœ‰ep5-1.mp3æ–‡ä»¶<br>
            â–¡ æ–‡ä»¶åå®Œå…¨åŒ¹é…ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
        </div>
        <button onclick="checkFiles()">ğŸ“‚ æ£€æŸ¥æ–‡ä»¶ç»“æ„</button>
        <div id="fileResult" class="result"></div>
    </div>

    <script>
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨æ”¯æŒ
        window.addEventListener('DOMContentLoaded', function() {
            detectBrowser();
        });

        function detectBrowser() {
            const resultDiv = document.getElementById('browserCheck');
            let result = '';
            
            // æ£€æµ‹Web Speech API
            const speechSupport = 'speechSynthesis' in window;
            result += 'ğŸ”Š Web Speech API: ';
            result += speechSupport ? '<span class="success">âœ“ æ”¯æŒ</span>' : '<span class="error">âœ— ä¸æ”¯æŒ</span>';
            result += '\n';
            
            // æ£€æµ‹Audio API
            const audioSupport = typeof Audio !== 'undefined';
            result += 'ğŸµ Audio API: ';
            result += audioSupport ? '<span class="success">âœ“ æ”¯æŒ</span>' : '<span class="error">âœ— ä¸æ”¯æŒ</span>';
            result += '\n\n';
            
            // æµè§ˆå™¨ä¿¡æ¯
            result += 'æµè§ˆå™¨: ' + navigator.userAgent + '\n';
            
            resultDiv.innerHTML = result;
            
            console.log('=== æµè§ˆå™¨æ£€æµ‹ ===');
            console.log('Web Speech API:', speechSupport);
            console.log('Audio API:', audioSupport);
            console.log('User Agent:', navigator.userAgent);
        }

        function testSpeech() {
            const resultDiv = document.getElementById('speechResult');
            resultDiv.innerHTML = 'æµ‹è¯•ä¸­...\n';
            
            console.log('=== æµ‹è¯•Web Speech API ===');
            
            if ('speechSynthesis' in window) {
                try {
                    window.speechSynthesis.cancel();
                    const utterance = new SpeechSynthesisUtterance('serendipity');
                    utterance.lang = 'en-US';
                    utterance.rate = 0.9;
                    
                    utterance.onstart = function() {
                        console.log('âœ“ å‘éŸ³å¼€å§‹');
                        resultDiv.innerHTML += '<span class="success">âœ“ å‘éŸ³å¼€å§‹</span>\n';
                    };
                    
                    utterance.onend = function() {
                        console.log('âœ“ å‘éŸ³ç»“æŸ');
                        resultDiv.innerHTML += '<span class="success">âœ“ å‘éŸ³ç»“æŸ - æµ‹è¯•æˆåŠŸï¼</span>\n';
                    };
                    
                    utterance.onerror = function(event) {
                        console.error('âœ— å‘éŸ³é”™è¯¯:', event.error);
                        resultDiv.innerHTML += '<span class="error">âœ— å‘éŸ³é”™è¯¯: ' + event.error + '</span>\n';
                        resultDiv.innerHTML += '\nå¯èƒ½åŸå› ï¼š\n';
                        resultDiv.innerHTML += '1. éœ€è¦å…ˆç‚¹å‡»é¡µé¢æ¿€æ´»éŸ³é¢‘\n';
                        resultDiv.innerHTML += '2. æµè§ˆå™¨é™åˆ¶äº†è¯­éŸ³åˆæˆ\n';
                        resultDiv.innerHTML += '3. æ²¡æœ‰å¯ç”¨çš„è¯­éŸ³å¼•æ“\n';
                    };
                    
                    window.speechSynthesis.speak(utterance);
                    resultDiv.innerHTML += 'å‘½ä»¤å·²å‘é€ï¼Œç­‰å¾…å“åº”...\n';
                    console.log('âœ“ å‘éŸ³å‘½ä»¤å·²å‘é€');
                    
                } catch (error) {
                    console.error('âœ— å¼‚å¸¸:', error);
                    resultDiv.innerHTML = '<span class="error">âœ— å¼‚å¸¸: ' + error.message + '</span>\n';
                }
            } else {
                resultDiv.innerHTML = '<span class="error">âœ— æµè§ˆå™¨ä¸æ”¯æŒWeb Speech API</span>\n';
                resultDiv.innerHTML += '\nè§£å†³æ–¹æ¡ˆï¼š\n';
                resultDiv.innerHTML += '1. ä½¿ç”¨Chromeæˆ–Edgeæµè§ˆå™¨\n';
                resultDiv.innerHTML += '2. æ›´æ–°æµè§ˆå™¨åˆ°æœ€æ–°ç‰ˆæœ¬\n';
                console.error('âœ— æµè§ˆå™¨ä¸æ”¯æŒWeb Speech API');
            }
        }

        function testAudio() {
            const resultDiv = document.getElementById('audioResult');
            resultDiv.innerHTML = 'æµ‹è¯•ä¸­...\n';
            
            console.log('=== æµ‹è¯•MP3éŸ³é¢‘æ’­æ”¾ ===');
            console.log('æœŸæœ›æ–‡ä»¶è·¯å¾„: ./videos/ep5-1.mp3');
            
            const audio = new Audio('./videos/ep5-1.mp3');
            
            audio.addEventListener('loadstart', function() {
                console.log('âœ“ å¼€å§‹åŠ è½½éŸ³é¢‘');
                resultDiv.innerHTML += 'å¼€å§‹åŠ è½½éŸ³é¢‘...\n';
            });
            
            audio.addEventListener('canplay', function() {
                console.log('âœ“ éŸ³é¢‘å¯ä»¥æ’­æ”¾');
                resultDiv.innerHTML += '<span class="success">âœ“ éŸ³é¢‘æ–‡ä»¶åŠ è½½æˆåŠŸï¼</span>\n';
                resultDiv.innerHTML += 'æ–‡ä»¶è·¯å¾„æ­£ç¡®ï¼š./videos/ep5-1.mp3\n';
            });
            
            audio.addEventListener('error', function(e) {
                console.error('âœ— éŸ³é¢‘åŠ è½½å¤±è´¥');
                console.error('é”™è¯¯:', e);
                resultDiv.innerHTML = '<span class="error">âœ— éŸ³é¢‘æ–‡ä»¶åŠ è½½å¤±è´¥ï¼</span>\n\n';
                resultDiv.innerHTML += 'å¯èƒ½åŸå› ï¼š\n';
                resultDiv.innerHTML += '1. videosæ–‡ä»¶å¤¹ä¸å­˜åœ¨\n';
                resultDiv.innerHTML += '2. ep5-1.mp3æ–‡ä»¶ä¸åœ¨videosæ–‡ä»¶å¤¹ä¸­\n';
                resultDiv.innerHTML += '3. æ–‡ä»¶åæ‹¼å†™é”™è¯¯ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰\n';
                resultDiv.innerHTML += '4. æ–‡ä»¶æ ¼å¼ä¸æ˜¯MP3\n\n';
                resultDiv.innerHTML += 'æœŸæœ›è·¯å¾„ï¼š./videos/ep5-1.mp3\n';
            });
            
            audio.play()
                .then(function() {
                    console.log('âœ“ æ’­æ”¾æˆåŠŸ');
                    resultDiv.innerHTML += '<span class="success">âœ“ éŸ³é¢‘æ’­æ”¾æˆåŠŸ - æµ‹è¯•æˆåŠŸï¼</span>\n';
                })
                .catch(function(error) {
                    console.error('âœ— æ’­æ”¾å¤±è´¥:', error);
                    resultDiv.innerHTML += '<span class="error">âœ— æ’­æ”¾å¤±è´¥: ' + error.message + '</span>\n\n';
                    
                    if (error.name === 'NotAllowedError') {
                        resultDiv.innerHTML += 'åŸå› ï¼šæµè§ˆå™¨é˜»æ­¢äº†è‡ªåŠ¨æ’­æ”¾\n';
                        resultDiv.innerHTML += 'è§£å†³æ–¹æ¡ˆï¼šå…ˆç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®å†æµ‹è¯•\n';
                    } else if (error.name === 'NotSupportedError') {
                        resultDiv.innerHTML += 'åŸå› ï¼šéŸ³é¢‘æ ¼å¼ä¸æ”¯æŒ\n';
                        resultDiv.innerHTML += 'è§£å†³æ–¹æ¡ˆï¼šç¡®è®¤æ–‡ä»¶æ˜¯MP3æ ¼å¼\n';
                    }
                });
        }

        function checkFiles() {
            const resultDiv = document.getElementById('fileResult');
            resultDiv.innerHTML = 'æ£€æŸ¥æ–‡ä»¶ç»“æ„...\n\n';
            
            console.log('=== æ£€æŸ¥æ–‡ä»¶ç»“æ„ ===');
            
            // å°è¯•åŠ è½½éŸ³é¢‘æ–‡ä»¶æ¥æ£€æµ‹æ˜¯å¦å­˜åœ¨
            const testAudio = new Audio('./videos/ep5-1.mp3');
            
            testAudio.addEventListener('canplay', function() {
                resultDiv.innerHTML = '<span class="success">âœ“ æ–‡ä»¶ç»“æ„æ­£ç¡®ï¼</span>\n\n';
                resultDiv.innerHTML += 'æ£€æµ‹åˆ°ï¼š\n';
                resultDiv.innerHTML += 'âœ“ videos/æ–‡ä»¶å¤¹å­˜åœ¨\n';
                resultDiv.innerHTML += 'âœ“ ep5-1.mp3æ–‡ä»¶å­˜åœ¨\n\n';
                resultDiv.innerHTML += 'å½“å‰æ–‡ä»¶ç»“æ„æ­£ç¡®ï¼š\n';
                resultDiv.innerHTML += 'HTMLæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹/\n';
                resultDiv.innerHTML += 'â”œâ”€â”€ éŸ³é¢‘æ’­æ”¾æµ‹è¯•å·¥å…·.html\n';
                resultDiv.innerHTML += 'â””â”€â”€ videos/\n';
                resultDiv.innerHTML += '    â””â”€â”€ ep5-1.mp3 âœ“\n';
                console.log('âœ“ æ–‡ä»¶ç»“æ„æ£€æŸ¥é€šè¿‡');
            });
            
            testAudio.addEventListener('error', function() {
                resultDiv.innerHTML = '<span class="error">âœ— æ–‡ä»¶ç»“æ„æœ‰é—®é¢˜ï¼</span>\n\n';
                resultDiv.innerHTML += 'æœªæ£€æµ‹åˆ°ï¼š./videos/ep5-1.mp3\n\n';
                resultDiv.innerHTML += 'è¯·ç¡®ä¿æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š\n';
                resultDiv.innerHTML += 'HTMLæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹/\n';
                resultDiv.innerHTML += 'â”œâ”€â”€ éŸ³é¢‘æ’­æ”¾æµ‹è¯•å·¥å…·.html\n';
                resultDiv.innerHTML += 'â””â”€â”€ videos/ â† éœ€è¦è¿™ä¸ªæ–‡ä»¶å¤¹\n';
                resultDiv.innerHTML += '    â””â”€â”€ ep5-1.mp3 â† éœ€è¦è¿™ä¸ªæ–‡ä»¶\n\n';
                resultDiv.innerHTML += 'æ“ä½œæ­¥éª¤ï¼š\n';
                resultDiv.innerHTML += '1. åœ¨HTMLæ–‡ä»¶æ—è¾¹åˆ›å»ºvideosæ–‡ä»¶å¤¹\n';
                resultDiv.innerHTML += '2. ä»C:\\Users\\wpr78\\Videos\\å¤åˆ¶ep5-1.mp3åˆ°videosæ–‡ä»¶å¤¹\n';
                resultDiv.innerHTML += '3. åˆ·æ–°æ­¤é¡µé¢é‡æ–°æµ‹è¯•\n';
                console.error('âœ— æ–‡ä»¶ç»“æ„æ£€æŸ¥å¤±è´¥');
            });
        }
    </script>
</body>
</html>
